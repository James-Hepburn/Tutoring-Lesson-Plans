<!DOCTYPE html>
<html>

<head>
  <title>Video Game Shop</title>

  <style>
    body {
      background-color: limegreen;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    header {
      background-color: black;
      padding: 20px;
    }

    .button-link {
      text-decoration: none;
      display: inline-block;
      margin: 0 100px;
      padding: 20px;
      color: white;
    }

    .button-link:hover {
      background-color: #555; 
    }

    .carousel {
      width: 300px; 
      height: 450px;
      overflow: hidden;
      border: 5px solid black;
      position: relative;
      margin: 0 auto;
    }

    .carousel-images {
      display: flex;
    }

    .carousel-images img {
      height: 450px;
      width: 300px;
      transition: transform 0.5s ease;
      cursor: pointer;
    }

    .all-games {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 50px;
      margin-top: 50px;
    }

    .modal {
      display: none; 
      position: fixed;
      z-index: 9999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.8);
    }

    .modal-content {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }

    .modal-image {
      max-width: 80%;
      max-height: 80%;
      object-fit: contain;
    }
  </style>
</head>

<body>
  <header>
    <a class = "button-link" href = "index.html"> Home Page </a>
    <a class = "button-link" href = "games.html"> View Games </a>
  </header>

  <div class = "all-games">
    <div class = "game">
      <h2>Spiderman 2</h2>
  
      <div class = "carousel" id = "game-1">
        <div class = "carousel-images">
          <img src = "all-images/game-1-1.jpg" onclick = "openModal ('all-images/game-1-1.jpg')">
          <img src = "all-images/game-1-2.jpg" onclick = "openModal ('all-images/game-1-2.jpg')">
          <img src = "all-images/game-1-3.png" onclick = "openModal ('all-images/game-1-3.png')">
        </div>
      </div>
    </div>
  
    <div class = "game">
      <h2>Forza Horizon 5</h2>
  
      <div class = "carousel" id = "game-2">
        <div class = "carousel-images">
          <img src = "all-images/game-2-1.webp" onclick = "openModal ('all-images/game-2-1.webp')">
          <img src = "all-images/game-2-2.jpeg" onclick = "openModal ('all-images/game-2-2.jpeg')">
          <img src = "all-images/game-2-3.jpg" onclick = "openModal ('all-images/game-2-3.jpg')">
        </div>
      </div>
    </div>
  
    <div class = "game">
      <h2>Super Mario Odyssey</h2>
  
      <div class = "carousel" id = "game-3">
        <div class = "carousel-images">
          <img src = "all-images/game-3-1.webp" onclick = "openModal ('all-images/game-3-1.webp')">
          <img src = "all-images/game-3-2.webp" onclick = "openModal ('all-images/game-3-2.webp')">
          <img src = "all-images/game-3-3.jpg" onclick = "openModal ('all-images/game-3-3.jpg')">
        </div>
      </div>
    </div>
  </div>

  <div id = "modal" class = "modal" onclick = "closeModal ()">
    <div class = "modal-content">
      <img id = "modal-image" class = "modal-image">
    </div>
  </div>

  <script>
    var all_carousels = document.querySelectorAll (".carousel");
    var keydownListener = null;
    var index = 0;

    all_carousels.forEach (function (carousel) {
      carousel.addEventListener ("mouseenter", function (event) {
        var carousel_id = event.target.id;
        addKeyListeners (carousel_id);
      });

      carousel.addEventListener ("mouseleave", function (event) {
        removeKeyListeners ();
      });
    });

    function change_image (direction, carousel_id) {
      var carousel = document.getElementById (carousel_id);
      var images = carousel.querySelectorAll (".carousel-images img");
      index += direction;

      if (index < 0) {
        index = images.length - 1;
      } else if (index >= images.length) {
        index = 0;
      }

      for (var i = 0; i < images.length; i++) {
        if (i == index) {
          images [i].style.display = "block";
        } else {
          images [i].style.display = "none";
        }
      }
    }

    function addKeyListeners (carousel_id) {
      keydownListener = function(event) {
        if (event.key == "ArrowLeft") {
          change_image (-1, carousel_id);
        } else if (event.key == "ArrowRight") {
          change_image (1, carousel_id);
        }
      };

      document.addEventListener ("keydown", keydownListener);
    }

    function removeKeyListeners () {
      if (keydownListener) {
        document.removeEventListener ("keydown", keydownListener);
        keydownListener = null;
      }
    }

    function openModal (imageUrl) {
      var modal = document.getElementById ('modal');
      var modalImg = document.getElementById ('modal-image');
      modal.style.display = "block";
      modalImg.src = imageUrl;
    }

    function closeModal () {
      var modal = document.getElementById ('modal');
      modal.style.display = "none";
    }
    
    change_image (0, "game-1");
    change_image (0, "game-2");
    change_image (0, "game-3");
  </script>
</body>

</html>
